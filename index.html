<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Login</title>
<style>
body{font-family:Arial;background:#f4f6f9;display:flex;justify-content:center;align-items:center;height:100vh;}
.box{background:white;padding:30px;width:350px;border-radius:8px;box-shadow:0 10px 25px rgba(0,0,0,0.1);}
input,button{width:100%;padding:10px;margin:8px 0;}
button{background:#1a73e8;color:white;border:none;border-radius:5px;cursor:pointer;}
a{font-size:14px;}
.msg{color:red;font-size:14px;}
</style>
</head>
<body>

<div class="box">
<h2>Login</h2>

<input type="email" id="email" placeholder="Email" required>
<input type="password" id="password" placeholder="Password" required>

<button onclick="login()">Login</button>

<div class="msg" id="msg"></div>

<a href="forgot.html">Forgot Password?</a><br>
<a href="register.html">Create Account</a>
</div>

<script>
const API = "https://script.google.com/macros/s/AKfycbyt8HoDUYZkGKDZ7VdjcGhKbCwK_VzQLycP3I6cZDT0s0BrAEaijl3e6CnWpnC-81-L/exec";

async function login(){

  const email = document.getElementById("email").value.trim();
  const password = document.getElementById("password").value.trim();

  if(!email || !password){
    document.getElementById("msg").innerText = "Fill all fields.";
    return;
  }

  const res = await fetch(API,{
    method:"POST",
    body:JSON.stringify({
      action:"login",
      email:email,
      password:password,
      ip:"",
      userAgent:navigator.userAgent
    })
  });

  const data = await res.json();

  if(data.status === "success"){
    sessionStorage.setItem("authToken",data.token);
    window.location.href="success.html";
  }
  else if(data.status === "locked"){
    document.getElementById("msg").innerText="Account locked temporarily.";
  }
  else{
    document.getElementById("msg").innerText="Invalid email or password.";
  }
}
</script>

</body>
</html>
