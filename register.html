<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Register</title>
<style>
body{font-family:Arial;background:#f4f6f9;display:flex;justify-content:center;align-items:center;height:100vh;}
.box{background:white;padding:30px;width:350px;border-radius:8px;box-shadow:0 10px 25px rgba(0,0,0,0.1);}
input,button{width:100%;padding:10px;margin:8px 0;}
button{background:#34a853;color:white;border:none;border-radius:5px;}
.msg{color:red;font-size:14px;}

/* Spinner animation */
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
.spinner {
  width:16px;
  color:green;
  height:16px;
  border:3px solid #f3f3f3;
  border-top:3px solid #1a73e8;
  border-radius:50%;
  animation:spin 1s linear infinite;
  display:inline-block;
  vertical-align:middle;
  margin-right:6px;
}
</style>
</head>
<body>

<div class="box">
<h2>Create Account</h2>

<input type="email" id="email" placeholder="Email">
<input type="password" id="password" placeholder="Password">

<button onclick="register()">Register</button>
<div class="msg" id="msg"></div>

<a href="index.html">Back to Login</a>
</div>

<script>
const API="https://script.google.com/macros/s/AKfycbxAVz1fgbNvB0MG6dCMPnpZ1QXOqZr_CzV_uaSzS3GWHTyXs8T644B2H93UaJ9xYgK3/exec";

async function register(){

  const email=document.getElementById("email").value.trim();
  const password=document.getElementById("password").value.trim();

  if(password.length < 6){
    document.getElementById("msg").innerText="Password must be 6+ characters.";
    return;
  }


//Added spinner
document.getElementById("msg").innerHTML = '<span class="spinner"></span> Wait a minute...';
//End of spinner

  const res=await fetch(API,{
    method:"POST",
    body:JSON.stringify({
      action:"register",
      email:email,
      password:password
    })
  });

  const data=await res.json();

  if(data.status==="success"){
    alert("Account created. Login now.");
    window.location.href="index.html";
  }else{
    document.getElementById("msg").innerText=data.message;
  }
}
</script>

</body>
</html>
